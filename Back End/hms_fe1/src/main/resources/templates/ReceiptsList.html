<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Student Receipts | Hostel Management</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		.modal {
			display: none;
			align-items: center;
			justify-content: center;
		}

		.modal.active {
			display: flex;
		}

		.modal img {
			max-width: 90%;
			max-height: 80%;
			object-fit: contain;
			margin: auto;
		}

		#close-modal {
			position: absolute;
			top: 8px;
			right: 8px;
			cursor: pointer;
			background-color: #f87171;
			color: white;
			border: none;
			padding: 4px 8px;
			border-radius: 50%;
			font-size: 16px;
		}
	</style>
</head>

<body class="bg-gray-100 text-gray-900">
	<div class="max-w-5xl mx-auto p-6">
		<div class="bg-white shadow-md rounded-lg overflow-hidden">
			<div class="px-6 py-4 text-center">
				<h2 class="text-2xl font-bold text-blue-600">Your Fee Receipts</h2>
				<p class="text-gray-600 mt-2">Below is the list of fee receipts you've uploaded.</p>
			</div>
			<div class="overflow-x-auto">
				<table class="min-w-full bg-white border border-gray-200">
					<thead>
						<tr class="bg-blue-600 text-white">
							<th class="py-2 px-2 border border-gray-200 text-center w-12">S.No</th>
							<th class="py-2 px-4 border border-gray-200 text-left">Receipt Name</th>
							<th class="py-2 px-4 border border-gray-200 text-left">Uploaded Date</th>
							<th class="py-2 px-4 border border-gray-200 text-left w-1/6">View</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="receipt, iterStat : ${receipts}" class="hover:bg-gray-50">
							<td class="py-2 px-2 border border-gray-200 text-center" th:text="${iterStat.index + 1}">
							</td>
							<td class="py-2 px-4 border border-gray-200" th:text="${receipt.fileName}"></td>
							<td class="py-2 px-4 border border-gray-200" th:text="${receipt.date}"></td>
							<td class="py-2 px-4 border border-gray-200 text-center">
								<button class="text-blue-600 font-bold view-btn"
									th:onclick="'viewReceipt(' + ${receipt.id} + ')'">View</button>
							</td>
						</tr>

					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!-- Modal for Receipt Image -->
	<div id="modal"
		class="modal fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center">
		<div class="relative bg-white rounded-lg shadow-lg p-4">
			<!-- Close Button -->
			<button id="close-modal"
				class="absolute top-2 right-2 bg-red-500 text-white font-bold px-2 py-1 rounded-full hover:bg-red-600">X</button>
			<!-- Image -->
			<img id="receipt-image" class="w-full h-auto max-w-xl rounded-lg" src="" alt="Receipt">
		</div>
	</div>


	<script>
		const modal = document.getElementById("modal");
		const receiptImage = document.getElementById("receipt-image");
		const closeModalButton = document.getElementById("close-modal");

		function viewReceipt(receiptId) {
			receiptImage.src = `/api/receipts/${receiptId}`;
			modal.classList.add("active");
		}

		closeModalButton.addEventListener("click", () => {
			modal.classList.remove("active");
		});
	</script>
</body>

</html>
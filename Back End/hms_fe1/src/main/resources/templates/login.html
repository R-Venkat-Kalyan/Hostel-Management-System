<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In</title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="assets/img/favicon.png" rel="icon">
    <style>
        body {
            background: linear-gradient(to right, #0062E6, #33AEFF);
            font-family: 'Roboto', sans-serif;
        }

        .btn-login {
            font-size: 0.9rem;
            letter-spacing: 0.05rem;
            padding: 0.75rem 1rem;
            border-radius: 30px;
        }

        .forgot-password {
            display: block;
            text-align: right;
            margin-top: -10px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #0062E6;
            text-decoration: none;
        }

        .forgot-password:hover {
            color: #004bb5;
            text-decoration: underline;
        }

        .signup-link {
            text-align: center;
            margin-top: 20px;
        }

        .signup-link a {
            color: #0062E6;
            text-decoration: none;
            font-weight: 500;
        }

        .signup-link a:hover {
            color: #004bb5;
            text-decoration: underline;
        }

        .divider-text {
            text-align: center;
            position: relative;
            margin-top: 30px;
            margin-bottom: 30px;
            color: #aaa;
        }

        .divider-text:before,
        .divider-text:after {
            content: "";
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #ddd;
        }

        .divider-text:before {
            left: 0;
        }

        .divider-text:after {
            right: 0;
        }

        .subheading {
            font-size: 0.9rem;
            color: #6c757d;
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
    
    <th:block th:if="${successMessage}">
		<script th:inline="javascript">
			/*<![CDATA[*/
			window.onload = function () {
				alert(/*[[${successMessage}]]*/ '');
			};
        /*]]>*/
		</script>
	</th:block>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
                <div class="card border-0 shadow rounded-3 my-5">
                    <div class="card-body p-4 p-sm-5">
                        <h5 class="card-title text-center mb-2 fw-bold fs-4">Welcome Back</h5>
                        <p class="subheading">Sign in here to access your account</p>
                        <form id="loginForm" onsubmit="validateId(event)" action="/user" method="post">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="floatingId" name="id" placeholder="10-digit ID" required>
                                <label for="floatingId">Enter Your 10-digit ID</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="password" class="form-control" id="floatingPassword" name="pwd" placeholder="Password" required>
                                <label for="floatingPassword">Enter Your Password</label>
                            </div>

                            <a href="#" class="forgot-password">Forgot Password?</a>

                            <div class="d-grid mb-4">
                                <button class="btn btn-primary btn-login text-uppercase fw-bold" type="submit">Sign in</button>
                            </div>

                            <div class="signup-link">
                                <p>New here? <a href="/sign-up">Create an account</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function validateId(event) {
            event.preventDefault();
            const form = document.getElementById("loginForm");
            const idInput = document.getElementById("floatingId").value;
            const idPattern = /^\d{10}$/; // Regex for 10-digit numeric ID
            if (!idPattern.test(idInput)) {
                alert("Please enter a valid 10-digit KL ID.");
                form.reset(); // Reset the form fields
                return;
            }
            // alert("Validation successful!");
            form.submit(); // Programmatically submit the form
        }
    </script>
</body>

</html>
